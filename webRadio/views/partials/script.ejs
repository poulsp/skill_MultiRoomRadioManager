<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js" type="text/javascript"></script> -->

<script src="./javascripts/mqttws31.min.js"></script>
<script src="./javascripts/my-mqttws.js"></script>

<script>
//-----------------------------------------------
function loadRadio(station) {
	getXttp(`/radio/${station}`)
}

//-----------------------------------------------
function reloadPage() {
	window.location.reload();
}


//-----------------------------------------------
function 	getXttp(param) {
  var xhttp = new XMLHttpRequest();
/*
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      // her kan du lave hvad som helst.
    }
  };
*/
	let paramStr = param.substring(0, 7)
	console.warn(`Vis sub string: ${paramStr}`)
 	if (paramStr == '/radio/') {
 		xhttp.onreadystatechange = function() {
  	  if (this.readyState == 4 && this.status == 200) {
 				console.warn(`Before ${document.getElementById("station-playing").innerHTML}`);

    		document.getElementById("station-playing").innerHTML = this.responseText;
		 		console.warn(`After ${document.getElementById("station-playing").innerHTML}`);
    	}
 		}
	}

  xhttp.open("GET", param, true);
  xhttp.send();
}
</script>
